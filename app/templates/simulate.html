<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimulaciÃ³n de {{ planta.nombre }}</title>
    <link href="{{ url_for('static', filename='css/planta.css') }}" rel="stylesheet">
</head>
<body>
    <h1>SimulaciÃ³n para: {{ planta.nombre }}</h1>

    <!-- Estado de la planta -->
    <div class="box {{ estado_color }}" id="estado-planta">
        {% if estado_color == 'green' %} ğŸ˜Š Â¡Todo bien!
        {% elif estado_color == 'yellow' %} ğŸ˜ En cuidado
        {% elif estado_color == 'orange' %} ğŸ˜Ÿ Preocupado
        {% else %} ğŸ˜­ Necesito ayuda
        {% endif %}
    </div>

    <hr>
    <hr>
    <hr>
    <hr>
    
    <!-- RepresentaciÃ³n visual de la planta -->
    <div class="wrap">
        <div class="base">
            <div class="flowerpot"></div>
            <div class="blade blade-center"></div>
        </div>
    </div>

    <!-- Tabla de condiciones -->
    <table id="tabla-condiciones">
        <thead>
            <tr>
                <th>CondiciÃ³n</th>
                <th>Valor Actual</th>
                <th>Rango Ideal</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Temperatura</td>
                <td>{{ valores_simulados.temperatura | round(1) }}Â°C</td>
                <td>{{ planta.temperatura_min }}Â°C - {{ planta.temperatura_max }}Â°C</td>
                <td>{{ 'âœ”ï¸' if rangos.temperatura else 'âŒ' }}</td>
            </tr>
            <tr>
                <td>PH</td>
                <td>{{ valores_simulados.ph | round(1) }}</td>
                <td>{{ planta.ph_min }} - {{ planta.ph_max }}</td>
                <td>{{ 'âœ”ï¸' if rangos.ph else 'âŒ' }}</td>
            </tr>
            <tr>
                <td>Humedad</td>
                <td>{{ valores_simulados.humedad }}%</td>
                <td>{{ planta.humedad_min }}% - {{ planta.humedad_max }}%</td>
                <td>{{ 'âœ”ï¸' if rangos.humedad else 'âŒ' }}</td>
            </tr>
        </tbody>
        
    </table>

    <!-- BotÃ³n para generar nuevos valores -->
    <div class="button-container">
        <button onclick="generarNuevosValores()">Generar Nuevos Valores</button>
    </div>

    <script>
        function generarNuevosValores() {
            // EnvÃ­a una solicitud GET para recargar con nuevos valores simulados
            location.href = "{{ url_for('main.simulate', id=planta.id) }}";
        }
    </script>
</body>
</html>
